## Homework #04

#### Stored Programs and Micro-Instructions  

1. The ALU in the [Knob & Switch Computer](http://users.dickinson.edu/~braught/kands/KandS2/dpandmem.html) includes operations `|` and `&`. Experiment with these operations.  Briefly explain what these operations compute and give an example of each.  Hint: Using base 2 values might help.

1. Give micro-programs for the Knob & Switch [Micro-Programmable Machine](http://users.dickinson.edu/~braught/kands/KandS2/micromachine.html)
that perform the computations indicated below. You may hand enter values into the main memory before running your program.  However, your program should not assume that 0 or any other specific values exist in the registers when your program begins.
   1. `MM[4] = MM[5] + MM[3]`
   1. `MM[2] = 8 * MM[1]`
   1. `MM[3] = MM[2] - 2 * MM[1]`
   1. Set `MM[2]` to be the two's complement of `MM[1]`. Note you cannot do this by flipping bits and adding 1 on the Knob & Switch because it does not have an instruction for flipping the bits. Hint: Taking the two's complement of a number changes its sign. Use other operations to make that happen, then confirm that you do in fact get the two's complement of your original number.
   1. Set `MM[2]` to be `MM[1]` with its 8 most significant bits set to 0 and its 8 least significant bits unchanged.  Hint: You will need to use your answer from the prior question about `&` and `|` and make a special value available in another memory location.  Be sure to indicate the value you used and the memory location where you stored it along with your answer.

#### Machine Language Instructions  

1. Write a few sentences comparing and contrasting micro-instructions and machine language instructions. How are they similar? How are they different?  (NOTE: This is asking conceptually about micro and machine language instructions, not the specifics of the Knob & Switch computer.)

1. Experiment with the Knob & Switch machine language instruction that moves a value from a register to main memory (e.g. `MM[10] = R1`).  Explain how this instruction passes the value of the register through the ALU (to get it to memory) without changing it.

1. Write Knob & Switch machine language programs for each of the following tasks. Show the instructions in binary, indicate the memory address at which each instruction is stored, note the effect of the instruction and show any initial contents that you placed into the memory.  Use a format similar to the following:
```
MM  Instruction/Data          Effect
0:  1000 0001 0 00 01010      R0 = MM[10]
1:  1000 0001 0 01 01011      R1 = MM[11]
2:  1010 0001 00 10 00 01     R2 = R0 + R1
3:  1000 0010 0 10 01100      MM[12] = R2
4:  1111 1111 1111 1111       Halt
...
10: 100
11: 202
12: 0
```
You can enter values into memory locations but you may not assume any particular values in the registers.  __To test your programs on the Knob & Switch computer be sure to set the datapath to use base 2 values.__

   1. `MM[12] = MM[13] - MM[15]`
   1. If `MM[20]` does not equal `MM[21]` then set `MM[22]` to be 1.
   1. Set the value in `MM[15]` to its absolute value.
   1. Optional Challenge: Set `MM[31]` to be the sum of all of the numbers between the value in `MM[29]` and the value in `MM[30]`.  You may assume that the the value in `MM[29]` is non-negative and that the value in `MM[30]` is larger than the value in `MM[29]`.  So for example, if `MM[29]` is 5 and `MM[30]` is 10 then your program should end with 5+6+7+8+9+10 = 45 in `MM[31]`.  Hint: You'll also need to have the value 1 in memory somewhere so that you can use it.

1. In many programming languages (e.g. C/C++/Python) any non-zero value is also interpreted as true and any zero value is also interpreted as false. In such languages the following statement would make sense:
   ```
   int x = 7
   if x == true:
      ...do something...
   ```

   In the above code the `...do something...` would happen because x is not 0 and thus would be interpreted as true.

   These interpretations of true and false also extend to logical operations.  For example:
   ```
   int x = 7
   int y = 0

   if x AND y:
     ...do thing A...

   if x OR y:
     ...do thing B...
   ```

   In the above code `thing A` will not happen but `thing B` will happen.

   Explain how the Knob & Switch computer (and actually real computers too) can easily compute values for `x AND y` and for `x OR y` that is consistent with this interpretation.  Hint: Consider the bits of the values.

1.  Write a machine language program for the Knob & Switch computer that sets the value of `MM[15]` to be true if both `MM[16]` and `MM[17]` have true values, otherwise `MM[15]` should be set to a false value.
